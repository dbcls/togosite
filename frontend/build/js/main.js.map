{"version":3,"file":"main.js","sources":["../../source/js/classes/DefaultEventEmitter.js","../../source/js/classes/ConditionBuilder.js","../../source/js/classes/ConditionBuilderView.js","../../source/js/classes/Records.js","../../source/js/classes/ReportsView.js","../../source/js/functions/collapseView.js","../../source/js/classes/ColumnSelectorView.js","../../source/js/classes/HistogramRangeSelectorView.js","../../source/js/classes/TrackOverviewCategorical.js","../../source/js/classes/TrackView.js","../../source/js/classes/ConceptView.js","../../source/js/classes/StatisticsView.js","../../source/js/classes/ResultsTable.js","../../source/js/classes/BalloonView.js","../../source/js/classes/TableData.js","../../source/js/classes/ConditionsController.js","../../source/js/classes/UploadIDsView.js","../../source/js/classes/PinsView.js","../../source/js/classes/App.js","../../source/js/main.js"],"sourcesContent":["class DefaultEventEmitter extends EventTarget {\n\n  constructor() {\n    super();\n  }\n\n}\n\nexport default new DefaultEventEmitter();\n","import DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nclass ConditionBuilder {\n\n  #propertyConditions;\n  #attributeConditions;\n  #subjectId;\n  #togoKey;\n\n  constructor() {\n    this.#propertyConditions = [];\n    this.#attributeConditions = [];\n  }\n\n  // public methods\n\n  addProperty(condition) {\n    console.log('addProperty', condition)\n    // store\n    this.#propertyConditions.push(condition);\n    // evaluate\n    this.#satisfyAggregation();\n    // dispatch event\n    const event = new CustomEvent('mutatePropertyCondition', {detail: {\n      action: 'add', \n      condition\n    }});\n    DefaultEventEmitter.dispatchEvent(event);\n  }\n\n  addPropertyValue(condition) {\n    console.log('add condition', condition)\n    // store\n    this.#attributeConditions.push(condition);\n    // evaluate\n    this.#satisfyAggregation();\n    // dispatch event\n    const event = new CustomEvent('mutatePropertyValueCondition', {detail: {\n      action: 'add', \n      condition\n    }});\n    DefaultEventEmitter.dispatchEvent(event);\n  }\n\n  removeProperty(propertyId) {\n    // remove from store\n    const position = this.#propertyConditions.findIndex(condition => condition.property.propertyId === propertyId);\n    if (position === -1) return;\n    this.#propertyConditions.splice(position, 1)[0];\n    // evaluate\n    this.#satisfyAggregation();\n    // dispatch event\n    const event = new CustomEvent('mutatePropertyCondition', {detail: {action: 'remove', propertyId}});\n    DefaultEventEmitter.dispatchEvent(event);\n  }\n\n  removePropertyValue(propertyId, categoryId, range) {\n    // remove from store\n    const position = this.#attributeConditions.findIndex(condition => condition.property.propertyId === propertyId && condition.value.categoryId === categoryId);\n    if (position === -1) return;\n    this.#attributeConditions.splice(position, 1)[0];\n    // evaluate\n    this.#satisfyAggregation();\n    // dispatch event\n    const event = new CustomEvent('mutatePropertyValueCondition', {detail: {action: 'remove', propertyId, categoryId}});\n    DefaultEventEmitter.dispatchEvent(event);\n  }\n\n  makeQueryParameter() {\n    // create properties\n    const properties = this.#propertyConditions.map(condition => {\n      return {\n        query: {\n          propertyId: condition.property.propertyId\n        },\n        property: condition.property,\n        subject: condition.subject\n      };\n    });\n    const attributesForEachProperties = {};\n    this.#attributeConditions.forEach(condition => {\n      const propertyId = condition.property.propertyId;\n      if (!attributesForEachProperties[propertyId]) attributesForEachProperties[propertyId] = [];\n      attributesForEachProperties[propertyId].push(condition.value.categoryId);\n    });\n    // create attributes (property values)\n    const attributes = Object.keys(attributesForEachProperties).map(propertyId => {\n      return {\n        query: {\n          propertyId,\n          categoryIds: attributesForEachProperties[propertyId]\n        },\n        property: this.#attributeConditions.find(condition => condition.property.propertyId === propertyId).property,\n        subject: this.#attributeConditions.find(condition => condition.property.propertyId === propertyId).subject\n      };\n    });\n    // emmit event\n    const event = new CustomEvent('completeQueryParameter', {detail: {\n      togoKey: this.#togoKey,\n      subjectId: this.#subjectId,\n      properties,\n      attributes\n    }});\n    DefaultEventEmitter.dispatchEvent(event);\n\n    // clear condition\n    // this.#propertyConditions = [];\n    // this.#attributeConditions = [];\n  }\n\n  setSubject(togoKey, subjectId) {\n    this.#togoKey = togoKey;\n    this.#subjectId = subjectId;\n    this.#satisfyAggregation();\n  }\n\n  // private methods\n\n  #satisfyAggregation() {\n    const established \n      = (this.#togoKey && this.#subjectId)\n      && (this.#propertyConditions.length > 0 || this.#attributeConditions.length > 0);\n    const event = new CustomEvent('mutateEstablishConditions', {detail: established});\n    DefaultEventEmitter.dispatchEvent(event);\n  }\n\n}\n\nexport default new ConditionBuilder();\n","import App from \"./App\";\nimport ConditionBuilder from \"./ConditionBuilder\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nexport default class ConditionBuilderView {\n\n  #select;\n  #propertiesConditionsContainer;\n  #attributesConditionsContainer;\n  #execButton;\n\n  constructor(elm) {\n\n    // references\n    const body = document.querySelector('body');\n    this.#select = elm.querySelector(':scope > select');\n    const conditionsContainer = elm.querySelector(':scope > .conditions');\n    this.#propertiesConditionsContainer = conditionsContainer.querySelector(':scope > .properties > .conditions');\n    this.#attributesConditionsContainer = conditionsContainer.querySelector(':scope > .attributes > .conditions');\n    this.#execButton = elm.querySelector(':scope > footer > button.exec');\n\n    // attach event\n    this.#execButton.addEventListener('click', () => {\n      // this.#propertiesConditionsContainer.innerHTML = '';\n      // this.#attributesConditionsContainer.innerHTML = '';\n      body.dataset.display = 'results';\n      ConditionBuilder.makeQueryParameter();\n    });\n\n    // event listeners\n    DefaultEventEmitter.addEventListener('mutatePropertyCondition', e => {\n      switch (e.detail.action) {\n        case 'add':\n          this.#addProperty(e.detail.condition.subject, e.detail.condition.property);\n          break;\n        case 'remove':\n          this.#removeProperty(e.detail.propertyId);\n          break;\n      }\n    });\n    DefaultEventEmitter.addEventListener('mutatePropertyValueCondition', e => {\n      switch (e.detail.action) {\n        case 'add':\n          this.#addPropertyValue(e.detail.condition.subject, e.detail.condition.property, e.detail.condition.value);\n          break;\n        case 'remove':\n          this.#removePropertyValue(e.detail.propertyId, e.detail.categoryId);\n          break;\n      }\n    });\n    DefaultEventEmitter.addEventListener('mutateEstablishConditions', e => {\n      this.#execButton.disabled = !e.detail;\n    });\n\n  }\n\n  // public methods\n\n  defineTogoKeys(togoKeys) {\n    // make options\n    this.#select.insertAdjacentHTML('beforeend', togoKeys.map(togoKey => `<option value=\"${togoKey.togoKey}\" data-subject-id=\"${togoKeys.subjectId}\">${togoKey.label} (${togoKey.togoKey})</option>`).join(''));\n    this.#select.disabled = false;\n    // attach event\n    this.#select.addEventListener('change', e => {\n      const togoKey = togoKeys.find(togoKey => togoKey.togoKey === e.target.value);\n      ConditionBuilder.setSubject(e.target.value, togoKey.subjectId);\n    });\n  }\n\n  // private methods\n\n  #addProperty(subject, property) {\n    // make view\n    const view = document.createElement('div');\n    view.classList.add('stacking-condition-view');\n    view.dataset.propertyId = property.propertyId;\n    view.innerHTML = `\n    <div class=\"closebutton\"></div>\n    <ul class=\"path\">\n      <li>${subject.subject}</li>\n    </ul>\n    <div class=\"label\" style=\"color: ${App.getHslColor(subject.hue)};\">${property.label}</div>`;\n    this.#propertiesConditionsContainer.insertAdjacentElement('beforeend', view);\n    // event\n    view.querySelector(':scope > .closebutton').addEventListener('click', () => {\n      ConditionBuilder.removeProperty(view.dataset.propertyId);\n    });\n  }\n  \n  #removeProperty(propertyId) {\n    const view = this.#propertiesConditionsContainer.querySelector(`[data-property-id=\"${propertyId}\"]`);\n    view.parentNode.removeChild(view);\n  }\n\n  #addPropertyValue(subject, property, value) {\n    // make view\n    const view = document.createElement('div');\n    view.classList.add('stacking-condition-view');\n    view.classList.add('-value');\n    view.dataset.propertyId = property.propertyId;\n    view.dataset.categoryId = value.categoryId;\n    // view.dataset.range = [0, 0]; // TODO:\n    view.style.backgroundColor = `hsl(${subject.hue}, 45%, 50%)`;\n    view.innerHTML = `\n    <div class=\"closebutton\"></div>\n    <ul class=\"path\">\n      <li>${subject.subject}</li>\n      <li>${property.label}</li>\n      ${value.ancestors.map(ancestor => `<li>${ancestor}</li>`).join('')}\n    </ul>\n    <div class=\"label\">${value.label}</div>`;\n    this.#attributesConditionsContainer.insertAdjacentElement('beforeend', view);\n    // event\n    view.querySelector(':scope > .closebutton').addEventListener('click', () => {\n      ConditionBuilder.removePropertyValue(view.dataset.propertyId, view.dataset.categoryId);\n    });\n  }\n\n  #removePropertyValue(propertyId, categoryId) {\n    const view = this.#attributesConditionsContainer.querySelector(`[data-property-id=\"${propertyId}\"][data-category-id=\"${categoryId}\"]`);\n    view.parentNode.removeChild(view);\n  }\n\n}","\nclass Records {\n\n  #subjects;\n  #properties;\n\n  constructor() {\n  }\n\n  // public methods\n\n  setSubjects(subjects) {\n    // define subjects\n    for (let i = 0; i < subjects.length; i++) {\n      let hue = 360 - (360 * i / subjects.length) + 180;\n      hue -= hue > 360 ? 360 : 0;\n      subjects[i].hue = hue;\n    }\n    this.#subjects = Object.freeze(subjects);\n    // set properties\n    this.#properties = [];\n    subjects.forEach(subject => {\n      subject.properties.forEach(property => {\n        this.#properties.push(Object.assign({subjectId: subject.subjectId}, property));\n      });\n    });\n    console.log(this.#subjects);\n    console.log(this.#properties);\n  }\n\n  setValues(propertyId, values) {\n    const property = this.#properties.find(property => property.propertyId === propertyId);\n    property.values = values;\n  }\n\n  getProperty(propertyId) {\n    console.log(propertyId)\n    const property = this.#properties.find(property => property.propertyId === propertyId);\n    console.log(property)\n    return property;\n  }\n\n  getValue(propertyId, categoryId) {\n    // const property = this.#properties.find(property => property.propertyId === propertyId);\n    const property = this.getProperty(propertyId);\n    const value = property.values.find(value => value.categoryId === categoryId);\n    return value;\n  }\n\n  // public accessors\n\n  get subjects() {\n    return this.#subjects;\n  }\n\n}\n\nexport default new Records();\n","import DefaultEventEmitter from \"./DefaultEventEmitter\";\nimport Records from './Records.js';\n\nexport default class ReportsView {\n\n  #templates;\n  #BODY;\n  #STANZAS_CONTAINER;\n\n  constructor(elm) {\n\n    this._stanzas = {};\n\n    // references\n    this.#BODY = document.querySelector('body');\n    this.#STANZAS_CONTAINER = elm.querySelector(':scope > .stanzas');\n    const returnButton = elm.querySelector(':scope > footer > button.return');\n\n    // attach event\n    returnButton.addEventListener('click', () => {\n      this.#BODY.dataset.display = 'properties';\n    });\n\n    // event listener\n    DefaultEventEmitter.addEventListener('showStanza', e => {\n      this.#showStanza(e.detail.subject, e.detail.properties);\n    });\n    DefaultEventEmitter.addEventListener('hideStanza', e => {\n      this.#hideStanza();\n    });\n  }\n\n  // private methods\n\n  #showStanza(subject, properties) {\n    console.log(subject, properties)\n    // make stanzas\n    this.#STANZAS_CONTAINER.innerHTML\n      = this.#stanza(subject.id, subject.value)\n      +　properties\n        .map(property => {\n          if (property === undefined) {\n            return '';\n          } else {\n            const subject = Records.subjects.find(subject => subject.properties.some(subjectProperty => subjectProperty.propertyId === property.propertyId));\n            // TODO: 1個目のアトリビュートしか返していない\n            return this.#stanza(subject.subjectId, property.attributes[0].id);\n          }\n        }).join('');\n  }\n\n  #hideStanza() {\n    this.#STANZAS_CONTAINER.innerHTML = '';\n  }\n\n  #stanza(subjectId, value) {\n    return `<div class=\"stanza-view\">${this.#templates[subjectId].replace(/{{id}}/g, value)}</div>`;\n  }\n\n  // public methods\n\n  defineTemplates(templates) {\n    console.log(templates)\n    this.#templates = templates;\n  }\n\n}\n","export default function collapseView(elm) {\n  const button = elm.querySelector(`.collapsebutton[data-collapse=\"${elm.dataset.collapse}\"]`);\n  const content = elm.querySelector(`.collapsingcontent[data-collapse=\"${elm.dataset.collapse}\"]`);\n  button.addEventListener('click', () => {\n    elm.classList.toggle('-spread');\n    button.classList.toggle('-spread');\n    content.classList.toggle('-spread');\n  });\n}\n","import App from \"./App\";\nimport ConditionBuilder from \"./ConditionBuilder\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nexport default class ColumnSelectorView {\n\n  constructor(elm, subject, property, items, sparqlist) {\n\n    this._subject = subject;\n    this._property = property;\n    this._sparqlist = sparqlist;\n    this._itemStatus = {};\n    this._columns = [];\n\n    // make container\n    elm.innerHTML = `\n    <div class=\"column-selector-view\">\n      <div class=\"columns\">\n        <div class=\"inner\"></div>\n      </div>\n      <div class=\"loading-view\"></div>\n    </div>`;\n    this._view = elm.querySelector(':scope > .column-selector-view');\n    this._container = this._view.querySelector(':scope > .columns > .inner');\n    this._loadingView = this._view.querySelector(':scope > .loading-view');\n\n    // even listener\n    DefaultEventEmitter.addEventListener('mutatePropertyValueCondition', e => {\n      let propertyId, categoryId;\n      switch (e.detail.action) {\n        case 'add':\n          propertyId = e.detail.condition.property.propertyId;\n          categoryId = e.detail.condition.value.categoryId;\n          break;\n        case 'remove':\n          propertyId = e.detail.propertyId;\n          categoryId = e.detail.categoryId;\n          break;\n      }\n      if (this._property.propertyId == propertyId) { // TODO: Number型になればこの処理は厳密比較に\n        this._columns.forEach(ul => {\n          ul.querySelectorAll('li').forEach(li => {\n            if (li.dataset.id == categoryId) { // TODO: Number型になればこの処理は厳密比較に\n              const isChecked = e.detail.action === 'add';\n              li.querySelector(':scope > input[type=\"checkbox\"]').checked = isChecked;\n              this._itemStatus[li.dataset.id].checked = isChecked;\n            }\n          })\n        });\n      }\n    });\n\n    this._addItems(items, 0);\n    this._makeColumn(items, 0);\n  }\n\n  _addItems(items, depth, parent) {\n    // console.log(items, depth)\n    for (const item of items) {\n      const hasChild = item.hasChild && item.hasChild === true;\n      this._itemStatus[item.categoryId] = {\n        label: item.label,\n        parent,\n        hasChild: hasChild ? true : false,\n        depth,\n        selected: false,\n        checked: false\n      }\n      if (hasChild) {\n        this._itemStatus[item.categoryId].children = [];\n      }\n    }\n    // console.log(this._itemStatus)\n  }\n\n  _makeColumn(items, depth) {\n    // console.log(items)\n\n    this._items = items.map(item => Object.assign({}, item));\n\n    // get column element\n    let ul;\n    if (this._columns[depth]) {\n      ul = this._columns[depth];\n    } else {\n      ul = document.createElement('ul');\n      ul.classList.add('column');\n      this._columns[depth] = ul;\n    }\n\n    // make items\n    ul.innerHTML = this._items.map(item => {\n      return `<li class=\"item${item.hasChild ? ' -haschild' : ''}\" data-id=\"${item.categoryId}\">\n        <input type=\"checkbox\" value=\"${item.categoryId}\"/>\n        <span class=\"label\">${item.label}</span>\n        <span class=\"count\">${item.count.toLocaleString()}</span>\n      </li>`;\n    }).join('');\n    this._container.insertAdjacentElement('beforeend', ul);\n    ul.querySelectorAll(':scope > .item').forEach((item, index) => {\n      this._items[index].elm = item;\n    })\n    this._update(App.viewModes.log10);\n\n    // drill down event\n    ul.querySelectorAll(':scope > .item.-haschild').forEach(item => {\n      item.addEventListener('click', () => {\n        item.classList.add('-selected');\n        // delete an existing lower columns\n        if (this._columns.length > depth + 1) {\n          for (let i = depth + 1; i < this._columns.length; i++) {\n            if (this._columns[i].parentNode) this._container.removeChild(this._columns[i]);\n          }\n        }\n        // deselect siblings\n        const selectedItemKeys = Object.keys(this._itemStatus).filter(id => this._itemStatus[id].selected && this._itemStatus[id].depth >= depth);\n        for (const key of selectedItemKeys) {\n          this._itemStatus[key].selected = false;\n          const selectedItem = this._columns[depth].querySelector(`[data-id=\"${key}\"]`);\n          if (selectedItem) selectedItem.classList.remove('-selected');\n        }\n        // get lower column\n        this._itemStatus[item.dataset.id].selected = true;\n        this._getChildren(item.dataset.id, depth + 1);\n      });\n    });\n\n    // select/deselect a item (attribute)\n    ul.querySelectorAll(':scope > .item > input[type=\"checkbox\"]').forEach(checkbox => {\n      checkbox.addEventListener('click', e => {\n        e.stopPropagation();\n        if (checkbox.checked) { // add\n          const ancestors = [];\n          let id = checkbox.value;\n          let parent;\n          do {\n            parent = this._itemStatus[id].parent;\n            if (parent) ancestors.unshift(this._itemStatus[parent]);\n            id = parent;\n          } while (parent);\n          ConditionBuilder.addPropertyValue({\n            subject: this._subject,\n            property: this._property,\n            value: {\n              categoryId: checkbox.value,\n              label: this._itemStatus[checkbox.value].label,\n              ancestors: ancestors.map(ancestor => ancestor.label)\n            }\n          });\n        } else { // remove\n          ConditionBuilder.removePropertyValue(this._property.propertyId, checkbox.value);\n        }\n      });\n    });\n\n    // event listener\n    DefaultEventEmitter.addEventListener('changeViewModes', e => this._update(e.detail.log10));\n  }\n\n  _update(isLog10) {\n    let max = Math.max(...Array.from(this._items).map(item => item.count));\n    max = isLog10 ? Math.log10(max) : max;\n    this._items.forEach(item => {\n      item.elm.style.backgroundColor = `hsl(${this._subject.hue}, 75%, ${100 - (isLog10 ? Math.log10(item.count) : item.count) / max * 40}%)`;\n    });\n  }\n\n  _getChildren(id, depth) {\n    // loading\n    this._loadingView.classList.add('-shown');\n    fetch(this._sparqlist + '?categoryIds=' + id)\n      .then(responce => responce.json())\n      .then(json => {\n        this._addItems(json, depth, id);\n        this._makeColumn(json, depth);\n        this._loadingView.classList.remove('-shown');\n        // scroll\n        const gap = this._view.scrollWidth - this._view.clientWidth;\n        if (gap > 0) this._view.scrollLeft = gap;\n      });\n  }\n\n}","import App from \"./App\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nexport default class HistogramRangeSelectorView {\n\n  constructor(elm, subject, property, items, sparqlist) {\n    // console.log(elm, subject, property, items, sparqlist)\n\n    this._subject = subject;\n    this._property = property;\n    this._sparqlist = sparqlist;\n    this._items = items.map(item => Object.assign({}, item));\n\n    // make container\n    elm.innerHTML = `\n    <div class=\"histogram-range-selector-view\">\n      <div class=\"histogram\">\n        <div class=\"grid\"></div>\n        <div class=\"graph\"></div>\n      </div>\n      <div class=\"controller\">\n        <div class=\"selector\">\n          <div class=\"slider -min\"></div>\n          <div class=\"slider -max\"></div>\n        </div>\n        <div class=\"form\">\n          <input type=\"number\" data-range=\"min\">\n          ~\n          <input type=\"number\" data-range=\"max\">\n        </div>\n      </div>`;\n\n    // make graph\n    const width = 100 / this._items.length;\n    elm.querySelector('.graph').innerHTML = this._items.map((item, index) => `<div class=\"bar\" style=\"width: ${width}%; background-color: ${App.getHslColor(subject.hue)};\" data-count=\"${item.count}\">\n      <div class=\"color\" style=\"background-color: hsla(${360 * index / this._items.length}, 70%, 50%, .075);\"></div>\n    </div>`).join('');\n    elm.querySelectorAll('.graph > .bar').forEach((item, index) => {\n      this._items[index].elm = item;\n    })\n    this._update();\n\n    // event\n    DefaultEventEmitter.addEventListener('changeViewModes', e => this._update());\n  }\n\n  _update() {\n    const isLog10 = App.viewModes.log10;\n    let max = Math.max(...Array.from(this._items).map(item => item.count));\n    max = isLog10 ? Math.log10(max) : max;\n    this._items.forEach(item => {\n      item.elm.style.height = (isLog10 ? Math.log10(item.count) : item.count) / max * 100 + '%';\n    });\n  }\n\n}","import App from \"./App\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\nimport ConditionBuilder from \"./ConditionBuilder\";\n\nexport default class TrackOverviewCategorical {\n\n  #subject;\n  #property;\n  #values;\n  #color;\n  #ROOT;\n\n  constructor(elm, subject, property, values) {\n\n    this.#ROOT = elm;\n    this.#subject = subject;\n    this.#property = property;\n    this.#values = values.map(value => Object.assign({}, value));\n\n    // make overview\n    // TODO: ヒストグラムは別処理\n    const sum = values.reduce((acc, value) => acc + value.count, 0);\n    const width = 100 / values.length;\n    this.#color = `hsla(${360 * index / values.length}, 70%, 50%, .075)`;\n    elm.innerHTML = this.#values.map((value, index) => {\n      value.countLog10 = value.count === 0 ? 0 : Math.log10(value.count);\n      value.width = value.count / sum * 100;\n      return `\n        <li class=\"value\" style=\"width: ${width}%;\" data-category-id=\"${value.categoryId}\">\n          <div class=\"color\" style=\"background-color: ${this.#color};\"></div>\n          <div class=\"heatmap\"></div>\n          <p>\n            <span class=\"label\">${value.label}</span>\n            <span class=\"count\">${value.count.toLocaleString()}</span>\n          </p>\n          <div class=\"pin\"></div>\n        </li>`;\n    }).join('');\n    elm.querySelectorAll(':scope > .value').forEach((node, index) =>  this.#values[index].elm = node);\n    this.#update(App.viewModes);\n\n    // attach event\n    elm.querySelectorAll(':scope > .value').forEach(valueElm => {\n\n      // show tooltip\n      valueElm.addEventListener('mouseenter', () => {\n        const valueData = this.#values.find(valueData => valueData.elm === valueElm);\n        const event = new CustomEvent('enterPropertyValueItemView', {detail: {\n          label: `<span style=\"color: ${App.getHslColor(this.#subject.hue)}\">${valueElm.querySelector(':scope > p > .label').textContent}</span>`,\n          values: [\n            {\n              key: 'Count',\n              value: valueData.count.toLocaleString()\n            }\n          ],\n          elm: valueElm\n        }});\n        DefaultEventEmitter.dispatchEvent(event);\n      });\n      valueElm.addEventListener('mouseleave', () => {\n        const event = new CustomEvent('leavePropertyValueItemView');\n        DefaultEventEmitter.dispatchEvent(event);\n      });\n\n      // select/deselect a value\n      valueElm.addEventListener('click', () => {\n        const valueData = this.#values.find(valueData => valueData.categoryId === valueElm.dataset.categoryId);\n        if (valueElm.classList.contains('-selected')) {\n          valueElm.classList.remove('-selected');\n          ConditionBuilder.removePropertyValue(this.#property.propertyId, valueData.categoryId);\n        } else {\n          valueElm.classList.add('-selected');\n          ConditionBuilder.addPropertyValue({\n            subject: this.#subject,\n            property: this.#property,\n            value: {\n              categoryId: valueData.categoryId,\n              label: valueData.label,\n              count: valueData.count,\n              ancestors: []\n            }\n          });\n        }\n      });\n    });\n\n    // event listener\n    DefaultEventEmitter.addEventListener('mutatePropertyValueCondition', e => {\n      let propertyId, categoryId;\n      switch (e.detail.action) {\n        case 'add':\n          propertyId = e.detail.condition.property.propertyId;\n          categoryId = e.detail.condition.value.categoryId;\n          break;\n        case 'remove':\n          propertyId = e.detail.propertyId;\n          categoryId = e.detail.categoryId;\n          break;\n      }\n      if (this.#property.propertyId === propertyId) {\n        this.#values.forEach(value => {\n          if (value.categoryId === categoryId) {\n            switch (e.detail.action) {\n              case 'add':\n                value.elm.classList.add('-selected');\n                break;\n              case 'remove':\n                value.elm.classList.remove('-selected');\n                break;\n            }\n          }\n        });\n      }\n    });\n    DefaultEventEmitter.addEventListener('changeViewModes', e => this.#update(e.detail));\n    DefaultEventEmitter.addEventListener('userValues', e => this.#plotUserIdValues(e.detail));\n  }\n\n  #update(viewModes) {\n    const isArea = viewModes.area;\n    const isLog10 = viewModes.log10;\n    const sum = this.#values.reduce((acc, value) => acc + (isLog10 ? value.countLog10 : value.count), 0);\n    let max = Math.max(...this.#values.map(value => value.count));\n    max = isLog10 ? Math.log10(max) : max;\n    const fixedWidth = isArea ? 0 : 100 / this.#values.length;\n    let width;\n    let left = 0;\n    this.#values.forEach(value => {\n      width = isArea ? (isLog10 ? Math.log10(value.count) : value.count) / sum * 100 : fixedWidth;\n      value.elm.style.width = width + '%';\n      value.elm.style.left = left + '%';\n      value.elm.querySelector(':scope > .heatmap').style.backgroundColor = `rgba(51, 50, 48, ${1 - (isLog10 ? value.countLog10 : value.count) / max})`;\n      left += width;\n    });\n  }\n\n  #plotUserIdValues(detail) {\n    if (this.#property.propertyId === detail.propertyId) {\n      this.#ROOT.classList.add('-pinsticking');\n      this.#values.forEach(value => {\n        const userValue = detail.values.find(userValue => userValue.categoryId === value.categoryId);\n        if (userValue) {\n          value.elm.classList.add('-pinsticking');\n          // dispatch event\n          const event = new CustomEvent('stickUserValue', {detail: {\n            view: value.elm,\n            userValue,\n            value\n          }});\n          DefaultEventEmitter.dispatchEvent(event);\n        } else {\n          value.elm.classList.remove('-pinsticking');\n        }\n      });\n    }\n  }\n\n}\n","import App from \"./App\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\nimport Records from \"./Records\";\nimport ConditionBuilder from \"./ConditionBuilder\";\nimport collapseView from '../functions/collapseView.js';\nimport ColumnSelectorView from './ColumnSelectorView.js';\nimport HistogramRangeSelectorView from './HistogramRangeSelectorView.js';\nimport TrackOverviewCategorical from './TrackOverviewCategorical.js';\n\nexport default class TrackView {\n\n  #subject;\n  #property;\n  #sparqlist;\n  #ROOT;\n  #LOADING_VIEW;\n  #SELECT_CONTAINER;\n  #OVERVIEW_CONTAINER;\n  #CHECKBOX_ALL_PROPERTIES;\n\n  constructor(subject, property, container, positionRate) {\n    // console.log(subject, property, container)\n\n    const elm = document.createElement('div');\n    container.insertAdjacentElement('beforeend', elm);\n    this.#ROOT = elm;\n    this.#subject = subject;\n    this.#property = property;\n    this.#sparqlist = property.data;\n    elm.classList.add('track-view');\n    elm.classList.add('-preparing');\n    elm.classList.add('collapse-view');\n    elm.dataset.propertyId = property.propertyId;\n    elm.dataset.collapse = property.propertyId;\n\n    // make html\n    elm.innerHTML = `\n    <div class=\"row -upper\">\n      <div class=\"left definition\">\n        <div class=\"collapsebutton\" data-collapse=\"${property.propertyId}\">\n          <h2 class=\"title\">${property.label}</h2>\n        </div>\n      </div>\n      <div class=\"right values\">\n        <div class=\"overview\" style=\"background-color: ${App.getHslColor(subject.hue)};\">\n          <ul class=\"inner\"></ul>\n          <div class=\"loading-view -shown\"></div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row -lower collapsingcontent\" data-collapse=\"${property.propertyId}\">\n      <div class=\"left\">\n        <p class=\"description\">${property.description}</p>\n        <label><input type=\"checkbox\">All properties</label>\n      </div>\n      <div class=\"right selector\"></div>\n    </div>`;\n    const valuesContainer = elm.querySelector(':scope > .row.-upper > .values');\n    this.#OVERVIEW_CONTAINER = valuesContainer.querySelector(':scope > .overview > .inner');\n    this.#LOADING_VIEW = valuesContainer.querySelector(':scope > .overview > .loading-view');\n    this.#SELECT_CONTAINER = elm.querySelector(':scope > .row.-lower > .selector');\n\n    // collapse\n    collapseView(elm);\n\n    // select/deselect a property\n    this.#CHECKBOX_ALL_PROPERTIES = elm.querySelector(':scope > .row.-lower > .left > label > input');\n    this.#CHECKBOX_ALL_PROPERTIES.addEventListener('change', e => {\n      e.stopPropagation();\n      if (this.#CHECKBOX_ALL_PROPERTIES.checked) { // add\n        ConditionBuilder.addProperty({\n          subject: this.#subject,\n          property: this.#property\n        });\n        this.#ROOT.classList.add('-allselected');\n      } else { // remove\n        ConditionBuilder.removeProperty(this.#property.propertyId);\n        this.#ROOT.classList.remove('-allselected');\n      }\n    });\n    // event listener\n    DefaultEventEmitter.addEventListener('mutatePropertyCondition', e => {\n      if (e.detail.action === 'remove') {\n        if (e.detail.propertyId === this.#property.propertyId) {\n          this.#CHECKBOX_ALL_PROPERTIES.checked = false;\n        }\n      }\n    });\n\n    // get property data\n    fetch(property.data)\n      .then(responce => responce.json())\n      .then(json => this.#makeValues(json))\n      .catch(error => {\n        console.error(error)\n        this.#OVERVIEW_CONTAINER.insertAdjacentHTML('afterend',`<div class=\"error\">${error} - <a href=\"${property.data}\" target=\"_blank\">${property.data}</a></div>`);\n        this.#LOADING_VIEW.classList.remove('-shown');\n      });\n  }\n\n  // private methods\n\n  #makeValues(values) {\n\n    this.#ROOT.classList.remove('-preparing');\n    this.#LOADING_VIEW.classList.remove('-shown');\n    Records.setValues(this.#property.propertyId, values);\n\n    // make overview\n    new TrackOverviewCategorical(this.#OVERVIEW_CONTAINER, this.#subject, this.#property, values);\n\n    // make selector view\n    if (this.#property.viewMethod && this.#property.viewMethod === 'histogram') {\n      new HistogramRangeSelectorView(\n        this.#SELECT_CONTAINER,\n        this.#subject,\n        this.#property,\n        values,\n        this.#sparqlist\n      );\n    } else {\n      new ColumnSelectorView(\n        this.#SELECT_CONTAINER,\n        this.#subject,\n        this.#property,\n        values,\n        this.#sparqlist\n      );\n    }\n  }\n\n}\n","import App from \"./App\";\nimport TrackView from './TrackView.js';\n\nexport default class ConceptView {\n\n  constructor(subject, elm) {\n    elm.classList.add('concept-view');\n    elm.innerHTML = `\n    <h3 class=\"title\" style=\"background-color: ${App.getHslColor(subject.hue)};\">\n      <span>${subject.subject}</span>\n    </h3>\n    <div class=\"properties\"></div>`;\n\n    // make tracks\n    const properties = subject.properties;\n    const propertiesContainer = elm.querySelector(':scope > .properties');\n    for (let i = 0; i < properties.length; i++) {\n      const property = properties[i];\n      new TrackView(subject, property, propertiesContainer, i / properties.length);\n    }\n  }\n\n}\n","import App from \"./App\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\nimport Records from './Records.js';\n\nexport default class StatisticsView {\n\n  #propertyId;\n  #hue;\n  #COUNTS;\n  #RATES;\n  #TICKS;\n\n  constructor(elm, property) {\n    console.log(property)\n\n    this.#propertyId = property.property.propertyId;\n    this.#hue = App.getHslColor(property.subject.hue);\n\n    elm.classList.add('statistics-view');\n\n    // make HTML\n    elm.innerHTML = `<div class=\"statistics\">\n      <div class=\"counts\"></div>\n      <div class=\"rates\"></div>\n      <div class=\"ticks\"></div>\n    </div>`;\n\n    // references\n    const container = elm.querySelector(':scope > .statistics');\n    this.#COUNTS = container.querySelector(':scope > .counts');\n    this.#RATES = container.querySelector(':scope > .rates');\n    this.#TICKS = container.querySelector(':scope > .ticks');\n\n    // event listener\n    DefaultEventEmitter.addEventListener('addNextRows', e => this.#draw(e.detail));\n  }\n\n  /**\n   * @param {TableData} detail.tableData\n   * @param {Array} detail.rows\n   * @param {Boolean} detail.done\n   */\n  #draw(detail) {\n\n    // const data = detail.tableData.data;\n    const attributes = detail.tableData.data\n      .map(datum => datum.properties.find(property => property.propertyId === this.#propertyId))\n      .filter(property => property !== undefined)\n      .map(property => property.attributes)\n      .flat()\n      .map(property => property.attribute);\n\n    const categoryIds = [...new Set(attributes.map(attribute => attribute.categoryId))];\n    \n    // count\n    const counts = categoryIds.map(categoryId => attributes.filter(attribute => attribute.categoryId === categoryId).length);\n    const countMax = Math.max(...counts);\n    // draw\n    this.#COUNTS.innerHTML = counts.map(count => {\n      const position = (count / countMax < .5) ? ' -below' : '';\n      return `\n      <div class=\"bar\" style=\"height: ${count / countMax * 100}%; background-color: ${this.#hue};\">\n        <div class=\"value${position}\">${count.toLocaleString()}</div>\n      </div>`;\n    }).join('');\n\n    // rate\n    const rates = categoryIds.map((categoryId, index) => {\n      const value = Records.getValue(this.#propertyId, categoryId);\n      const sum = value.count * detail.tableData.rateOfProgress;\n      return counts[index] / sum;\n    });\n    const rateMax = Math.max(...rates);\n    // draw\n    this.#RATES.innerHTML = rates.map(rate => {\n      const position = (rate / rateMax < .5) ? ' -below' : '';\n      return `\n      <div class=\"bar\" style=\"height: ${rate / rateMax * 100}%; background-color: ${this.#hue};\">\n        <div class=\"value${position}\">${rate.toLocaleString()}</div>\n      </div>`;\n    }).join('');\n\n    // tick\n    const labels = categoryIds.map(categoryId => attributes.find(attribute => attribute.categoryId === categoryId)).map(attribute => attribute.label);\n    this.#TICKS.innerHTML = labels.map(label => {\n      return `\n      <div class=\"bar\">\n        <div class=\"label\">${label}</div>\n      </div>`;\n    }).join('');\n  }\n\n}","import App from \"./App\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\nimport StatisticsView from \"./StatisticsView\";\n\nexport default class ResultsTable {\n\n  #ROOT;\n  #THEAD;\n  #STATS;\n  #TBODY;\n  #TABLE_END;\n  #LOADING_VIEW;\n  #intersctionObserver;\n  #tableData;\n\n  constructor(elm) {\n\n    // references\n    this.#ROOT = elm;\n    const TABLE = elm.querySelector(':scope > .body > table');\n    this.#THEAD = TABLE.querySelector(':scope > thead > tr.header');\n    this.#STATS = TABLE.querySelector(':scope > thead > tr.statistics');\n    this.#TBODY = TABLE.querySelector(':scope > tbody');\n    this.#TABLE_END = elm.querySelector(':scope > .body > .tableend');\n    this.#LOADING_VIEW = this.#TABLE_END.querySelector(':scope > .loading-view');\n\n    // get next data automatically\n    this.#intersctionObserver = new IntersectionObserver(entries => {\n      for (const entry of entries) {\n        if (entry.target === this.#TABLE_END) {\n          if (entry.isIntersecting) {\n            this.#enterTableEnd();\n          }\n        }\n      }\n    });\n\n    // event listener\n    DefaultEventEmitter.addEventListener('selectTableData', e => this.#setupTable(e.detail));\n    DefaultEventEmitter.addEventListener('addNextRows', e => this.#addTableRows(e.detail));\n    DefaultEventEmitter.addEventListener('failedFetchTableDataIds', e => this.#failed(e.detail));\n\n    // turnoff intersection observer after display transition\n    const mutationObserver = new MutationObserver(mutations => {\n      mutations.forEach(mutation => {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'data-display') {\n          if (mutation.target.dataset.display !== 'results') {\n            this.#intersctionObserver.unobserve(this.#TABLE_END);\n            // deselect table data\n            this.#tableData.deselect();\n          }\n        }\n      });\n    });\n    mutationObserver.observe(\n      document.querySelector('body'),\n      {attributes: true}\n    );\n  }\n\n  // private methods\n\n  #enterTableEnd() {\n    this.#intersctionObserver.unobserve(this.#TABLE_END);\n    this.#tableData.next();\n  }\n\n  #setupTable(tableData) {\n\n    const properties = tableData.condition.attributes.concat(tableData.condition.properties);\n    console.log(properties)\n\n    // reset\n    this.#tableData = tableData;\n    this.#intersctionObserver.unobserve(this.#TABLE_END);\n    this.#ROOT.classList.remove('-complete');\n    this.#THEAD.innerHTML = '';\n    this.#TBODY.innerHTML = '';\n    this.#LOADING_VIEW.classList.add('-shown');\n    DefaultEventEmitter.dispatchEvent(new CustomEvent('hideStanza'));\n\n    // make table header\n    this.#THEAD.innerHTML = `\n      <th>\n        <div class=\"inner\">\n          <div class=\"togo-key-view\">${tableData.condition.togoKey}</div>\n        </div>\n      </th>\n      ${tableData.condition.attributes.map(property => `\n      <th>\n        <div class=\"inner -propertyvalue\" style=\"background-color: ${App.getHslColor(property.subject.hue)}\">\n          <div class=\"togo-key-view\">${property.property.primaryKey}</div>\n          <span>${property.property.label}</span>\n        </div>\n      </th>`).join('')}\n      ${tableData.condition.properties.map(property => `\n      <th>\n        <div class=\"inner -property\" style=\"color: ${App.getHslColor(property.subject.hue)}\">\n          <div class=\"togo-key-view\">${property.property.primaryKey}</div>\n          <span>${property.property.label}</span>\n        </div>\n      </th>`).join('')}`;\n\n      // make stats\n      this.#STATS.innerHTML = '<td><div class=\"inner\"><div></td>' + properties.map(() => `<td><div class=\"inner\"><div></div></div></td>`).join('');\n      this.#STATS.querySelectorAll(':scope > td > .inner > div').forEach((elm, index) => {\n        if (index === 0 ) return;\n        new StatisticsView(elm, properties[index - 1]);\n      });\n  }\n\n  #addTableRows(detail) {\n\n    this.#tableData = detail.tableData;\n\n    // normalize\n    const rows = [];\n    detail.rows.forEach(row => {\n      rows.push([...detail.tableData.serializedHeader.map(head => row.properties.find(property => property.propertyId === head))]);\n    });\n\n    // make table\n    this.#TBODY.insertAdjacentHTML('beforeend', rows.map((row, index) => {\n      return `<tr data-index=\"${detail.tableData.offset + index}\" data-togo-id=\"${detail.rows[index].id}\">\n        <th>\n          <div class=\"inner\">\n            <div class=\"togo-key-view\">${detail.rows[index].id}</div>\n          </div>\n        </th>\n        ${row.map(column => {\n          // console.log(column)\n          if (column) {\n            return `\n              <td><div class=\"inner\"><ul>${column.attributes.map(attribute => {\n              if (!attribute.attribute) console.error(attribute);\n              return `\n              <li>\n                <div class=\"togo-key-view\">${attribute.id}</div>\n                <a\n                  href=\"${attribute.attribute ? attribute.attribute.uri : ''}\"\n                  title=\"${attribute.attribute ? attribute.attribute.uri : ''}\"\n                  target=\"_blank\">${attribute.attribute ? attribute.attribute.label : attribute}</a>\n              </li>`;\n            }).join('')}</ul></div></td>`;\n          } else {\n            return '<td><div class=\"inner -empty\"></div></td>';\n          }\n        }).join('')}\n      </tr>`;\n    }).join(''));\n\n    // turn off auto-loading after last line is displayed\n    if (detail.done) {\n      this.#ROOT.classList.add('-complete');\n      this.#LOADING_VIEW.classList.remove('-shown');\n    } else {\n      this.#ROOT.classList.remove('-complete');\n      this.#LOADING_VIEW.classList.add('-shown');\n      this.#intersctionObserver.observe(this.#TABLE_END);\n    }\n\n    // attach event\n    rows.forEach((row, index) => {\n      const actualIndex = detail.tableData.offset + index;\n      const tr = this.#TBODY.querySelector(`:scope > tr[data-index=\"${actualIndex}\"]`);\n      tr.addEventListener('click', () => {\n        if (tr.classList.contains('-selected')) {\n          // hide stanza\n          tr.classList.remove('-selected');\n          DefaultEventEmitter.dispatchEvent(new CustomEvent('hideStanza'));\n        } else {\n          // show stanza\n          this.#TBODY.querySelectorAll(':scope > tr').forEach(tr => tr.classList.remove('-selected'));\n          tr.classList.add('-selected');\n          // dispatch event\n          const event = new CustomEvent('showStanza', {detail: {\n            subject: {\n              togoKey: this.#tableData.togoKey,\n              id: this.#tableData.subjectId,\n              value: tr.dataset.togoId\n            },\n            properties: row\n          }});\n          DefaultEventEmitter.dispatchEvent(event);\n        }\n      })\n    });\n  }\n\n  #failed(tableData) {\n    console.log(tableData)\n    this.#ROOT.classList.add('-complete');\n    this.#LOADING_VIEW.classList.remove('-shown');\n  }\n\n}\n","import DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nexport default class BalloonView {\n\n  #ROOT;\n  #CONTAINER;\n\n  constructor() {\n\n    // make element\n    this.#ROOT = document.createElement('div');\n    this.#ROOT.className = 'balloon-view';\n    document.querySelector('body').insertAdjacentElement('beforeend', this.#ROOT);\n    this.#ROOT.innerHTML = '<div class=\"container\"></div>';\n    this.#CONTAINER = this.#ROOT.querySelector(':scope > .container');\n\n    // event listener\n    DefaultEventEmitter.addEventListener('enterPropertyValueItemView', e => {\n      this.#CONTAINER.innerHTML = `\n        <header>${e.detail.label}</header>\n        ${e.detail.values.map(value => `<dl>\n          <dt>${value.key}:</dt>\n          <dd>${value.value}</dd>\n        </dl>`).join('')}`;\n      // geography\n      const rect = e.detail.elm.getBoundingClientRect();\n      const isBelow = window.innerHeight * .3 > rect.top;\n      this.#ROOT.style.left = (rect.left + rect.width * .5) + 'px';\n      if (isBelow) {\n        this.#ROOT.classList.add('-below');\n        this.#ROOT.style.top = (rect.top + 10) + 'px';\n      } else {\n        this.#ROOT.classList.remove('-below');\n        this.#ROOT.style.top = rect.top + 'px';\n      }\n      this.#ROOT.classList.add('-showing');\n    });\n    DefaultEventEmitter.addEventListener('leavePropertyValueItemView', e => {\n      this.#ROOT.classList.remove('-showing');\n    });\n  }\n\n}","import App from \"./App\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nconst LIMIT = 10;\n\nexport default class TableData {\n\n  #condition;\n  #serializedHeader;\n  #queryIds;\n  #rows;\n  #abortController;\n  #isAutoLoad;\n  #isLoaded;\n  #ROOT;\n  #STATUS;\n  #INDICATOR_TEXT;\n  #INDICATOR_BAR;\n  #BUTTON_PREPARE_DOWNLOAD;\n\n  constructor(condition, elm) {\n    console.log(condition)\n\n    this.#isAutoLoad = false;\n    this.#isLoaded = false;\n    this.#condition = condition;\n    this.#serializedHeader = [\n      ...condition.attributes.map(property => property.query.propertyId),\n      ...condition.properties.map(property => property.query.propertyId)\n    ];\n    this.#queryIds = [];\n    this.#rows = [];\n\n    // view\n    elm.classList.add('table-data-controller-view');\n    elm.dataset.status = 'load ids';\n\n    elm.innerHTML = `\n    <div class=\"conditions\">\n      <div class=\"condiiton\">\n        <p title=\"${condition.togoKey}\">${condition.togoKey}</p>\n      </div>\n      ${condition.attributes.map(property => `<div class=\"condiiton -value\" style=\"background-color: hsl(${property.subject.hue}, 45%, 50%)\">\n        <p title=\"${property.property.label}\">${property.property.label}</p>\n      </div>`).join('')}\n      ${condition.properties.map(property => `<div class=\"condiiton -value\" style=\"color: hsl(${property.subject.hue}, 45%, 50%)\">\n        <p title=\"${property.property.label}\">${property.property.label}</p>\n      </div>`).join('')}\n    </div>\n    <div class=\"status\">\n      <p>Getting id list</p>\n    </div>\n    <div class=\"indicator\">\n      <div class=\"text\"></div>\n      <div class=\"progress\">\n        <div class=\"bar\"></div>\n      </div>\n    </div>\n    <div class=\"controller\">\n      <div class=\"button\" title=\"Prepare for download\" data-button=\"prepare-download\">\n        <span class=\"material-icons-outlined\">download</span>\n      </div>\n      <div class=\"button\" title=\"Restore as condition\" data-button=\"restore\">\n        <span class=\"material-icons-outlined\">settings_backup_restore</span>\n      </div>\n      <div class=\"button\" title=\"Delete\" data-button=\"delete\">\n        <span class=\"material-icons-outlined\">delete</span>\n      </div>\n    </div>\n    <div class=\"downloads\">\n      <div class=\"button\" title=\"Download CSV\">\n        <span class=\"material-icons-outlined\">download</span>\n        CSV\n      </div>\n      <div class=\"button\" title=\"Download JSON \">\n        <span class=\"material-icons-outlined\">download</span>\n        JSON\n      </div>\n    </div>`;\n\n    // reference\n    this.#ROOT = elm;\n    this.#STATUS = elm.querySelector(':scope > .status > p');\n    const INDICATOR = elm.querySelector(':scope > .indicator');\n    this.#INDICATOR_TEXT = INDICATOR.querySelector(':scope > .text');\n    this.#INDICATOR_BAR = INDICATOR.querySelector(':scope > .progress > .bar');\n    const BUTTONS = [...elm.querySelectorAll(':scope > .controller > .button')];\n    this.#BUTTON_PREPARE_DOWNLOAD = BUTTONS.find(button => button.dataset.button === 'prepare-download');\n\n    // events\n    elm.addEventListener('click', () => {\n      if (elm.classList.contains('-current')) return;\n      this.select();\n    });\n    this.#BUTTON_PREPARE_DOWNLOAD.addEventListener('click', e => {\n      e.stopPropagation();\n      this.#autoLoad();\n    });\n    BUTTONS.find(button => button.dataset.button === 'restore').addEventListener('click', e => {\n      e.stopPropagation();\n      console.log('restore')\n    });\n    BUTTONS.find(button => button.dataset.button === 'delete').addEventListener('click', e => {\n      e.stopPropagation();\n      console.log('delete')\n    });\n\n    this.select();\n    this.#getQueryIds();\n  }\n\n  /* private methods */\n\n  #getQueryIds() {\n    // reset\n    this.#abortController = new AbortController();\n    this.#ROOT.classList.add('-fetching');\n    // set parameters\n    fetch(\n      `${App.aggregatePrimaryKeys}?togoKey=${this.#condition.togoKey}&properties=${encodeURIComponent(JSON.stringify(this.#condition.attributes.map(property => property.query)))}`,\n      {\n        signal: this.#abortController.signal\n      })\n      .catch(error => {\n        throw Error(error);\n      })\n      .then(responce => {\n        console.log(responce);\n        if (responce.ok) {\n          return responce\n        };\n        this.#STATUS.classList.add('-error');\n        this.#STATUS.textContent = `${responce.status} (${responce.statusText})`;\n        throw Error(responce);\n      })\n      .then(responce => {\n        // const reader = responce.body.getReader();\n        // console.log(reader);\n        return responce.json();\n      })\n      .then(queryIds => {\n        console.log(queryIds)\n        this.#queryIds = queryIds;\n        if (queryIds.length === 0) {\n          console.log('****** 0 ken')\n          this.#complete();\n          return;\n        }\n        // display\n        this.#ROOT.dataset.status = 'load rows';\n        this.#STATUS.textContent = '';\n        this.#INDICATOR_TEXT.innerHTML = `${this.offset.toLocaleString()} / ${this.#queryIds.length.toLocaleString()}`;\n        this.#getProperties();\n      })\n      .catch(error => {\n        // TODO:\n        console.error(error)\n        const event = new CustomEvent('failedFetchTableDataIds', {detail: this});\n        DefaultEventEmitter.dispatchEvent(event);\n      })\n      .finally(() => {\n        this.#ROOT.classList.remove('-fetching');\n      });\n  }\n\n  #getProperties() {\n    this.#ROOT.classList.add('-fetching');\n    this.#STATUS.textContent = 'Getting data';\n    fetch(\n      `${App.aggregateRows}?togoKey=${this.#condition.togoKey}&properties=${encodeURIComponent(JSON.stringify(this.#condition.attributes.map(property => property.query).concat(this.#condition.properties.map(property => property.query))))}&queryIds=${encodeURIComponent(JSON.stringify(this.#queryIds.slice(this.offset, this.offset + LIMIT)))}`,\n      {\n        signal: this.#abortController.signal\n      })\n      .then(responce => responce.json())\n      .then(rows => {\n        console.log(rows)\n        this.#rows.push(...rows);\n        this.#isLoaded = this.offset >= this.#queryIds.length;\n        // display\n        this.#ROOT.classList.remove('-fetching');\n        this.#STATUS.textContent = 'Awaiting';\n        this.#INDICATOR_TEXT.innerHTML = `${this.offset.toLocaleString()} / ${this.#queryIds.length.toLocaleString()}`;\n        this.#INDICATOR_BAR.style.width = `${(this.offset / this.#queryIds.length) * 100}%`;\n        // dispatch event\n        const event = new CustomEvent('addNextRows', {detail: {\n          tableData: this,\n          rows,\n          done: this.#isLoaded\n        }});\n        DefaultEventEmitter.dispatchEvent(event);\n        // turn off after finished\n        if (this.#isLoaded) {\n          this.#complete();\n        } else if (this.#isAutoLoad) {\n          this.#getProperties();\n        }\n      })\n      .catch(error => {\n        this.#ROOT.classList.remove('-fetching');\n        console.error(error) // TODO:\n      });\n  }\n\n  #autoLoad() {\n    if (this.#isLoaded) return;\n    this.#isAutoLoad = true;\n    this.#ROOT.classList.add('-autoload');\n    this.#getProperties();\n  }\n\n  #complete() {\n    this.#ROOT.dataset.status = 'complete';\n    this.#STATUS.textContent = 'Complete';\n  }\n\n  /* public methods */\n\n  select() {\n    this.#ROOT.classList.add('-current');\n    // dispatch event\n    const event1 = new CustomEvent('selectTableData', {detail: this});\n    DefaultEventEmitter.dispatchEvent(event1);\n    // send rows\n    if (this.#ROOT.dataset.status !== 'load ids') {\n      const done = this.offset >= this.#queryIds.length;\n      const event2 = new CustomEvent('addNextRows', {detail: {\n        tableData: this, \n        rows: this.#rows,\n        done\n      }});\n      DefaultEventEmitter.dispatchEvent(event2);\n    }\n  }\n\n  deselect() {\n    this.#ROOT.classList.remove('-current');\n  }\n\n  next() {\n    if (this.#isAutoLoad) return;\n    this.#getProperties();\n  }\n\n  /* public accessors */\n\n  get offset() {\n    return this.#rows.length;\n  }\n  get togoKey() {\n    return this.condition.togoKey;\n  }\n  get subjectId() {\n    return this.condition.subjectId;\n  }\n  get condition() {\n    return this.#condition;\n  }\n  get serializedHeader() {\n    return this.#serializedHeader;\n  }\n  get data() {\n    return this.#rows;\n  }\n  get rateOfProgress() {\n    return this.#rows.length / this.#queryIds.length;\n  }\n\n}\n","import TableData from \"./TableData\";\nimport DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nexport default class ConditionsController {\n\n  #tableData;\n  #body;\n  #conditionsContainer;\n\n  constructor(elm) {\n\n    this.#tableData = [];\n\n    // references\n    this.#conditionsContainer = elm.querySelector(':scope > .conditions');\n    this.#body = document.querySelector('body');\n\n    // event listener\n    DefaultEventEmitter.addEventListener('completeQueryParameter', e => this.#setTableData(e.detail));\n    DefaultEventEmitter.addEventListener('selectTableData', e => this.#selectTableData(e.detail));\n  }\n\n  /* private methods */\n\n  #setTableData(newCondition) {\n\n    // find matching condition from already existing conditions\n    // TODO: うまく検出できていない\n    const sameConditionTableData = this.#tableData.find(tableData => {\n      const matchTogoKey = newCondition.togoKey === tableData.condition.togoKey;\n      // compare properties\n      const matchProperties = newCondition.properties.every(newProperty => {\n        return tableData.condition.properties.find(property => newProperty.query.propertyId === property.query.propertyId)\n      });\n      // compare attributes\n      const matchAttributes = newCondition.attributes.every(newProperty => {\n        return tableData.condition.attributes.find(property => {\n          const matchId = newProperty.query.propertyId === property.query.propertyId;\n          let matchValues = newProperty.query.categoryIds.every(categoryId => property.query.categoryIds.indexOf(categoryId) !== -1);\n          return matchId && matchValues;\n        });\n      });\n      return matchTogoKey && matchProperties && matchAttributes;\n    });\n\n    if (sameConditionTableData) {\n      // use existing table data\n      sameConditionTableData.select();\n    } else {\n      // make new table data\n      const elm = document.createElement('div');\n      this.#conditionsContainer.insertAdjacentElement('afterbegin', elm);\n      this.#tableData.push(new TableData(newCondition, elm));\n    }\n  }\n\n  #selectTableData(selectedTableData) {\n    this.#body.dataset.display = 'results';\n    // deselect\n    for (const tableData of this.#tableData) {\n      if (tableData !== selectedTableData) tableData.deselect();\n    }\n  }\n\n}\n","import DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nconst PATH = 'https://integbio.jp/togosite/sparqlist/api/';\nconst DATA_FROM_USER_IDS = 'data_from_user_ids';\n\nexport default class UploadIDsView {\n\n  #ROOT;\n  #SPARQLET;\n  #PRIMARY_KEY;\n  #USER_KEY;\n  #USER_IDS;\n\n  constructor(elm) {\n\n    this.#ROOT = elm;\n    this.#SPARQLET = elm.querySelector('#UploadIDsSparqlet');\n    this.#PRIMARY_KEY = elm.querySelector('#UploadIDsPrimaryKey');\n    this.#USER_KEY = elm.querySelector('#UploadIDsUserKey');\n    this.#USER_IDS = elm.querySelector('#UploadIDsUserIDs');\n\n    elm.querySelectorAll(':scope > span').forEach(elm => {\n      elm.addEventListener('click', () => {\n        this.#ROOT.classList.toggle('-showingmenu');\n      });\n    });\n    elm.querySelector(':scope > form > button').addEventListener('click', e => {\n      e.stopPropagation();\n      this.#ROOT.classList.remove('-showingmenu');\n      this.#fetch();\n      return false;\n    });\n  }\n\n  #fetch() {\n    const propertyId = this.#SPARQLET.value;\n    fetch(`${PATH + DATA_FROM_USER_IDS}?sparqlet=${encodeURIComponent(PATH + propertyId)}&primaryKey=${this.#PRIMARY_KEY.value}&categoryIds=&userKey=${this.#USER_KEY.value}&userIds=${encodeURIComponent(this.#USER_IDS.value)}`)\n    .then(responce => responce.json())\n    .then(values => {\n      console.log(values)\n      // dispatch event\n      const event = new CustomEvent('userValues', {detail: {\n        propertyId,\n        values\n      }});\n      DefaultEventEmitter.dispatchEvent(event);\n    });\n  }\n\n\n\n\n\n}\n","import DefaultEventEmitter from \"./DefaultEventEmitter\";\n\nconst MIN_SIZE = 8;\nconst MAX_SIZE = 50;\nconst RANGE_SIZE = MAX_SIZE - MIN_SIZE;\n\nexport default class PinsView {\n\n  #ROOT;\n\n  constructor(elm) {\n    console.log(elm)\n    this.#ROOT = elm;\n\n    DefaultEventEmitter.addEventListener('stickUserValue', e => {\n      this.#stick(e.detail)\n\n      // Element.getBoundingClientRect\n    });\n  }\n\n  #stick(detail) {\n    console.log(detail)\n    const rect = detail.view.getBoundingClientRect();\n    const ratio = detail.userValue.count / detail.value.count;\n    const size = MIN_SIZE + RANGE_SIZE * ratio;\n    console.log(rect)\n    const pin = document.createElement('div');\n    pin.classList.add('pin');\n    pin.style.top = rect.top + 'px';\n    pin.style.left = rect.left + 'px';\n    pin.style.width = size + 'px';\n    pin.style.height = size + 'px';\n    this.#ROOT.insertAdjacentElement('beforeend', pin);\n\n    console.log(ratio, Math.log10(ratio))\n\n  }\n\n}\n","import DefaultEventEmitter from \"./DefaultEventEmitter\";\nimport ConditionBuilderView from './ConditionBuilderView.js';\nimport Records from './Records.js';\nimport ReportsView from './ReportsView.js';\nimport ConceptView from './ConceptView.js';\nimport ResultsTable from './ResultsTable.js';\nimport BalloonView from './BalloonView.js';\nimport ConditionsController from \"./ConditionsController\";\nimport UploadIDsView from \"./UploadIDsView\";\nimport PinsView from \"./PinsView\";\n\nconst CONF_PROPERTIES = 'https://raw.githubusercontent.com/dbcls/togosite/develop/config/togosite-human/properties.json';\nconst CONF_TEMPLATES = 'https://raw.githubusercontent.com/dbcls/togosite/develop/config/togosite-human/templates.json';\nconst CONF_AGGREGATE = 'https://raw.githubusercontent.com/dbcls/togosite/develop/config/togosite-human/aggregate.json';\n\nclass App {\n\n  #viewModes;\n  #aggregate;\n\n  constructor() {\n    window.app = this;\n  }\n\n  ready() {\n\n    const body = document.querySelector('body');\n\n    // view modes\n    this.#viewModes = {};\n    document.querySelectorAll('#Properties > .header > nav .viewmodecontroller input[type=\"checkbox\"]').forEach(checkbox => {\n      this.#viewModes[checkbox.value] = checkbox.checked;\n      checkbox.addEventListener('click', () => {\n        if (checkbox.value === 'heatmap')  body.dataset.heatmap = checkbox.checked;\n        this.#viewModes[checkbox.value] = checkbox.checked;\n        const event = new CustomEvent('changeViewModes', {detail: this.#viewModes});\n        DefaultEventEmitter.dispatchEvent(event);\n      });\n    });\n\n    // set up views\n    const conditionBuilderView = new ConditionBuilderView(document.querySelector('#ConditionBuilder'));\n    new ConditionsController(document.querySelector('#Conditions'));\n    const reportsView = new ReportsView(document.querySelector('#Reports'));\n    new ResultsTable(document.querySelector('#ResultsTable'));\n    new BalloonView();\n    new UploadIDsView(document.querySelector('#UploadIDsView'));\n    new PinsView(document.querySelector('#PinsView'));\n\n    // load config json\n    let stanzaTtemplates;\n    Promise.all([\n      fetch(CONF_PROPERTIES),\n      fetch(CONF_TEMPLATES),\n      fetch(CONF_AGGREGATE)\n    ])\n      .then(responces => Promise.all(responces.map(responce => responce.json())))\n      .then(([subjects, templates, aggregate]) => {\n        stanzaTtemplates = templates;\n        Records.setSubjects(subjects);\n        // define primary keys\n        const togoKeys = subjects.map(subject => {\n          return {\n            label: subject.subject,\n            togoKey: subject.togoKey,\n            subjectId: subject.subjectId\n          }\n        });\n        conditionBuilderView.defineTogoKeys(togoKeys);\n        // set stanza scripts\n        document.querySelector('head').insertAdjacentHTML('beforeend', templates.stanzas.map(stanza => `<script type=\"module\" src=\"${stanza}\"></script>`).join(''));\n        // aggregate\n        this.#aggregate = Object.freeze(aggregate);\n\n        // get stanza templates\n        return Promise.all(\n          Object.keys(templates.templates).map(key => fetch(templates.templates[key]))\n        );\n      })\n      .then(responces => Promise.all(responces.map(responce => responce.text())))\n      .then(templates => {\n        // set stanza templates\n        const stanzaTemplates = Object.fromEntries(Object.keys(stanzaTtemplates.templates).map((stanza, index) => [stanza, templates[index]]));\n        reportsView.defineTemplates(stanzaTemplates);\n        // define properties (app start)\n        this.#makeConceptViews();\n        // Records.setSubjects(this.#subjects);\n      });\n  }\n\n  // private methods\n\n  #makeConceptViews() {\n    const conceptsContainer = document.querySelector('#Properties > .concepts');\n    console.log(Records)\n    console.log(Records.subjects)\n    Records.subjects.forEach(subject => {\n      const elm = document.createElement('section');\n      new ConceptView(subject, elm);\n      conceptsContainer.insertAdjacentElement('beforeend', elm);\n    });\n  }\n\n  // public methods\n\n  // utilities\n  getHslColor(hue) {\n    return `hsl(${hue}, 50%, 55%)`;\n  }\n\n  // accessor\n  get viewModes() {\n    return this.#viewModes;\n  }\n  get aggregatePrimaryKeys() {\n    return this.#aggregate.filter.url;\n  }\n  get aggregateRows() {\n    return this.#aggregate.table.url;\n  }\n\n}\n\nexport default new App();\n","import App from './classes/App.js';\n\nglobalThis.togositeapp = App;\nApp.ready();\n"],"names":["DefaultEventEmitter","EventTarget","ConditionBuilder","condition","console","log","push","event","CustomEvent","detail","action","dispatchEvent","propertyId","position","findIndex","property","splice","categoryId","range","value","properties","map","query","subject","attributesForEachProperties","forEach","attributes","Object","keys","categoryIds","find","togoKey","subjectId","established","length","ConditionBuilderView","elm","body","document","querySelector","conditionsContainer","addEventListener","dataset","display","makeQueryParameter","e","disabled","togoKeys","insertAdjacentHTML","label","join","target","setSubject","view","createElement","classList","add","innerHTML","App","getHslColor","hue","insertAdjacentElement","removeProperty","parentNode","removeChild","style","backgroundColor","ancestors","ancestor","removePropertyValue","Records","subjects","i","freeze","assign","values","getProperty","ReportsView","_stanzas","returnButton","templates","id","undefined","some","subjectProperty","replace","collapseView","button","collapse","content","toggle","ColumnSelectorView","items","sparqlist","_subject","_property","_sparqlist","_itemStatus","_columns","_view","_container","_loadingView","ul","querySelectorAll","li","isChecked","checked","_addItems","_makeColumn","depth","parent","item","hasChild","selected","children","_items","count","toLocaleString","index","_update","viewModes","log10","selectedItemKeys","filter","key","selectedItem","remove","_getChildren","checkbox","stopPropagation","unshift","addPropertyValue","isLog10","max","Math","Array","from","fetch","then","responce","json","gap","scrollWidth","clientWidth","scrollLeft","HistogramRangeSelectorView","width","height","TrackOverviewCategorical","sum","reduce","acc","countLog10","node","valueElm","valueData","textContent","contains","isArea","area","fixedWidth","left","userValue","TrackView","container","positionRate","data","description","valuesContainer","addProperty","catch","error","setValues","viewMethod","ConceptView","propertiesContainer","StatisticsView","tableData","datum","flat","attribute","Set","counts","countMax","rates","getValue","rateOfProgress","rateMax","rate","labels","ResultsTable","TABLE","IntersectionObserver","entries","entry","isIntersecting","mutationObserver","MutationObserver","mutations","mutation","type","attributeName","unobserve","deselect","observe","next","concat","primaryKey","rows","row","serializedHeader","head","offset","column","uri","done","actualIndex","tr","togoId","BalloonView","className","rect","getBoundingClientRect","isBelow","window","innerHeight","top","LIMIT","TableData","status","INDICATOR","BUTTONS","select","event1","event2","AbortController","aggregatePrimaryKeys","encodeURIComponent","JSON","stringify","signal","Error","ok","statusText","queryIds","finally","aggregateRows","slice","ConditionsController","newCondition","sameConditionTableData","matchTogoKey","matchProperties","every","newProperty","matchAttributes","matchId","matchValues","indexOf","selectedTableData","PATH","DATA_FROM_USER_IDS","UploadIDsView","MIN_SIZE","MAX_SIZE","RANGE_SIZE","PinsView","ratio","size","pin","CONF_PROPERTIES","CONF_TEMPLATES","CONF_AGGREGATE","app","heatmap","conditionBuilderView","reportsView","stanzaTtemplates","Promise","all","responces","aggregate","setSubjects","defineTogoKeys","stanzas","stanza","text","stanzaTemplates","fromEntries","defineTemplates","url","table","conceptsContainer","globalThis","togositeapp","ready"],"mappings":"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"}