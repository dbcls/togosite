<div id="reportBody"></div>
<script>
  (() => {
    // Functions
    // access API and return JSON
    const fetchJSON = async (api) => {
      const response = await fetch(api);
      const json = await response.json();
      console.log(api);  // debug
      console.log(json); // debug
      return json;
    }

    // configuration files
    const propertiesConfig = async () => {
      const propertiesConfigUrl = "https://github.com/dbcls/togosite/raw/develop/config/togosite-human/properties.json";
      const config = await fetchJSON(propertiesConfigUrl);
      return config;
    }

    // Get row data from frontend table view
    const data = {{data}};

    // Get target body
    const reportBody = document.getElementById("reportBody");

    // Remove duplicated items
    const deduplicateData = async () => {
      return data;
    }

    // function to append column information to the body
    const appendTemplate = async (id) => {
      const templateDiv = document.createElement('div');
      templateDiv.setAttribute('id', id);
      reportBody.appendChild(templateDiv);
    }

    // itearete each item to append hbs templates
    const appendTemplates = async () => {
      const d = await deduplicateData();
      for (const column of d) {
        appendTemplate(column);
      }
    }
  })()
</script>
